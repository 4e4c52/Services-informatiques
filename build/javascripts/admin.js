(function(){jQuery(function(){var a,b,c,d,e,f,g,h;h='<li><img src="../images/loader.gif" alt="#" />&nbsp;<strong>Chargement des donn&eacute;es...</strong></li>';switch($("body").attr("class")){case"admin admin_index":g="data";break;case"admin admin_registrations":g="waiting";break;case"admin admin_computer_convention":g="cc_signatures";break;case"admin admin_protel_convention":g="cp_signatures";break;case"admin admin_repositories":g="waiting_repositories"}e=function(){$("#registrations").html("").html(h);return $.ajax({type:"get",url:"../data/receiver_admin.php",data:{action:"get_waiting"},success:function(a){var b;b=jQuery.parseJSON(a);if(b.status===200)return $("#registrations").html("").html(b.registrations);if(b.status===400)return alert("Une erreur est survenue lors de la communication avec le serveur.")},error:function(a,b,c){return $("#registrations").html("").html('<li><span style="color:#980905;">Impossible de contacter le serveur.</span></li>')}})},c=function(){$("#registrations").html("").html(h);return $.ajax({type:"get",url:"../data/receiver_admin.php",data:{action:"get_validated"},success:function(a){var b;b=jQuery.parseJSON(a);if(b.status===200)return $("#registrations").html("").html(b.registrations);if(b.status===400)return alert("Une erreur est survenue lors de la communication avec le serveur.")},error:function(a,b,c){return $("#registrations").html("").html('<li><span style="color:#980905;">Impossible de contacter le serveur.</span></li>')}})},f=function(){$("#repositories").html("").html(h);return $.ajax({type:"get",url:"../data/receiver_admin.php",data:{action:"get_waiting_repositories"},success:function(a){var b;b=jQuery.parseJSON(a);if(b.status===200)return $("#repositories").html("").html(b.repositories);if(b.status===400||b.status===500)return alert("Une erreur est survenue lors de la communication avec le serveur.")},error:function(a,b,c){return $("#repositories").html("").html('<li><span style="color:#980905;">Impossible de contacter le serveur.</span></li>')}})},d=function(){$("#repositories").html("").html(h);return $.ajax({type:"get",url:"../data/receiver_admin.php",data:{action:"get_validated_repositories"},success:function(a){var b;b=jQuery.parseJSON(a);if(b.status===200)return $("#repositories").html("").html(b.repositories);if(b.status===400||b.status===500)return alert("Une erreur est survenue lors de la communication avec le serveur.")},error:function(a,b,c){return $("#repositories").html("").html('<li><span style="color:#980905;">Impossible de contacter le serveur.</span></li>')}})},a=function(){$("#signatures").html("").html(h);return $.ajax({type:"get",url:"../data/receiver_admin.php",data:{action:"get_cc_signatures"},success:function(a){var b;b=jQuery.parseJSON(a);if(b.status===200)return $("#signatures").html("").html(b.signatures);if(b.status===400)return alert("Une erreur est survenue lors de la communication avec le serveur.")},error:function(a,b,c){return $("#signatures").html("").html('<li><span style="color:#980905;">Impossible de contacter le serveur.</span></li>')}})},b=function(){$("#signatures").html("").html(h);return $.ajax({type:"get",url:"../data/receiver_admin.php",data:{action:"get_cp_signatures"},success:function(a){var b;b=jQuery.parseJSON(a);if(b.status===200)return $("#signatures").html("").html(b.signatures);if(b.status===400)return alert("Une erreur est survenue lors de la communication avec le serveur.")},error:function(a,b,c){return $("#signatures").html("").html('<li><span style="color:#980905;">Impossible de contacter le serveur.</span></li>')}})},g==="cc_signatures"&&a(),g==="cp_signatures"&&b(),g==="waiting"&&e(),g==="waiting_repositories"&&f(),g==="data"&&$.ajax({type:"get",url:"../data/receiver_admin.php",data:{action:"get_data"},success:function(a){var b;b=jQuery.parseJSON(a);if(b.status===200){$("#registrations").html("").html(b.registrations),$("#repositories").html("").html(b.repositories);return $("#signatures").html("").html(b.signatures)}if(b.status===400||b.status===500)return alert("Une erreur est survenue lors de la communication avec le serveur.")},error:function(a,b,c){$("#registrations").html("").html('<li><span style="color:#980905;">Impossible de contacter le serveur.</span></li>'),$("#repositories").html("").html('<li><span style="color:#980905;">Impossible de contacter le serveur.</span></li>');return $("#signatures").html("").html('<li><span style="color:#980905;">Impossible de contacter le serveur.</span></li>')}}),$(".admin_registrations .delete").live("click",function(){var a,b;a=$(this).parent(),b=$(this).parent().find("input[type=checkbox]").attr("id"),$("#loading-"+b).show(),$.ajax({type:"post",url:"../data/receiver_admin.php",data:{action:"delete_registration",mac_address:b},success:function(b){var c;c=jQuery.parseJSON(b);if(c.status===200)return a.remove();if(c.status===400||c.status===500)return alert("Une erreur est survenue lors de la communication avec le serveur.")},error:function(a,b,c){return alert("Impossible de contacter le serveur.")}});return!1}),$(".admin_registrations #registrations input[type=checkbox]").live("click",function(){var a,b;a=$(this).parent(),b=$(this).attr("id"),a.find("input[type=checkbox]").hide(),$("#loading-"+b).show(),$.ajax({type:"post",url:"../data/receiver_admin.php",data:{action:"validate_registration",mac_address:b},success:function(b){var c;c=jQuery.parseJSON(b);if(c.status===200){a.find("input[type=checkbox]").attr("checked","checked");return a.addClass("validated")}if(c.status===400||c.status===500)return alert("Une erreur est survenue lors de la communication avec le serveur.")},error:function(a,b,c){return alert("Impossible de contacter le serveur.")}}),a.find("input[type=checkbox]").show(),$("#loading-"+b).hide();return!0}),$(".admin_registrations #registrations .validated input[type=checkbox]").live("click",function(){var a,b;a=$(this).parent(),b=$(this).attr("id"),a.find("input[type=checkbox]").hide(),$("#loading-"+b).show(),$.ajax({type:"post",url:"../data/receiver_admin.php",data:{action:"unvalidate_registration",mac_address:b},success:function(b){var c;c=jQuery.parseJSON(b);if(c.status===200||c.status===500){a.removeClass("validated");return a.find("input[type=checkbox]").removeAttr("checked")}if(c.status===400)return alert("Une erreur est survenue lors de la communication avec le serveur.")},error:function(a,b,c){return alert("Impossible de contacter le serveur.")}}),a.find("input[type=checkbox]").show(),$("#loading-"+b).hide();return!1}),$(".admin_repositories .delete").live("click",function(){var a,b;a=$(this).parent(),b=$(this).parent().find("input[type=checkbox]").attr("id"),$("#loading-"+b).show(),$.ajax({type:"post",url:"../data/receiver_admin.php",data:{action:"delete_repository",repository:b},success:function(b){var c;c=jQuery.parseJSON(b);if(c.status===200)return a.remove();if(c.status===400||c.status===500)return alert("Une erreur est survenue lors de la communication avec le serveur.")},error:function(a,b,c){return alert("Impossible de contacter le serveur.")}});return!1}),$(".admin_repositories #repositories input[type=checkbox]").live("click",function(){var a,b;a=$(this).parent(),b=$(this).attr("id"),a.find("input[type=checkbox]").hide(),$("#loading-"+b).show(),$.ajax({type:"post",url:"../data/receiver_admin.php",data:{action:"validate_repository",repository:b},success:function(b){var c;c=jQuery.parseJSON(b);if(c.status===200){a.find("input[type=checkbox]").attr("checked","checked");return a.addClass("validated")}if(c.status===400||c.status===500)return alert("Une erreur est survenue lors de la communication avec le serveur.")},error:function(a,b,c){return alert("Impossible de contacter le serveur.")}}),a.find("input[type=checkbox]").show(),$("#loading-"+b).hide();return!0}),$(".admin_repositories #repositories .validated input[type=checkbox]").live("click",function(){var a,b;a=$(this).parent(),b=$(this).attr("id"),a.find("input[type=checkbox]").hide(),$("#loading-"+b).show(),$.ajax({type:"post",url:"../data/receiver_admin.php",data:{action:"unvalidate_repository",repository:b},success:function(b){var c;c=jQuery.parseJSON(b);if(c.status===200){a.removeClass("validated");return a.find("input[type=checkbox]").removeAttr("checked")}if(c.status===400||c.status===500)return alert("Une erreur est survenue lors de la communication avec le serveur.")},error:function(a,b,c){return alert("Impossible de contacter le serveur.")}}),a.find("input[type=checkbox]").show(),$("#loading-"+b).hide();return!1}),$(".waiting").live("mouseenter",function(){return $(this).find(".delete").show()}),$(".waiting").live("mouseleave",function(){return $(this).find(".delete").hide()}),$(".admin_registrations #switch").click(function(){$(".content-title").hasClass("waiting-title")?($(".content-title").html("").html("Enregistrements valid&eacute;s"),$(".content-title").removeClass("waiting-title").addClass("validated-title"),c()):($(".content-title").html("").html("Enregistrements en attente"),$(".content-title").removeClass("validated-title").addClass("waiting-title"),e());return!1});return $(".admin_repositories #switch").click(function(){$(".content-title").hasClass("waiting-title")?($(".content-title").html("").html("Demandes valid&eacute;es"),$(".content-title").removeClass("waiting-title").addClass("validated-title"),d()):($(".content-title").html("").html("Demandes en attente"),$(".content-title").removeClass("validated-title").addClass("waiting-title"),f());return!1})})}).call(this)